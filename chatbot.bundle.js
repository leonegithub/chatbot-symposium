!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).Chatbot=t(e.React)}(this,(function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=t(e);return()=>{const[t,l]=e.useState(""),[n,s]=e.useState([]),[o,c]=e.useState(!1),[r,d]=e.useState(!0),i=e.useRef(null);e.useEffect((()=>{i.current&&i.current.scrollIntoView({behavior:"smooth"}),0===n.length&&u("Hello")}),[n]);const u=async e=>{c(!0);const t=[...n,{user:"user",message:e}];s(t),l("");const a=new FormData;a.append("messaggio",e),a.append("progetto","lis2025"),await async function(){try{const e=await fetch("https://checkip.amazonaws.com/"),t=await e.text();a.append("ip",t)}catch(e){console.error("Error fetching IP address",e)}}();try{const e=await fetch("https://php.leone.it/api/AI/GetAIResponse.php",{method:"POST",headers:{Authorization:"Bearer wlfca9P8Zn0zQt4zwpcDne4KJROqEOAzIy3dr0Eyxhbzhqz4ydddgjc"},body:a}),l=await e.json();s([...t,{user:"bot",message:l.ReturnedObject}])}catch(e){console.error("Error fetching APIs",e)}finally{c(!1)}};return a.default.createElement(a.default.Fragment,null,r?a.default.createElement("div",{className:"chatbot-container",id:"little"},a.default.createElement("div",{className:"opening-line"},a.default.createElement("span",{style:{cursor:"pointer"},onClick:()=>d(!r),className:"chatbot-title"},"LeoneAmerica Demo"),a.default.createElement("span",{className:"close-icon",onClick:()=>d(!r),style:{cursor:"pointer"}},r?a.default.createElement("i",{className:"fa-sharp fa-solid fa-angle-down",style:{color:"#0d4fd1"}}):a.default.createElement("i",{className:"fa-sharp fa-solid fa-angle-up",style:{color:"#0d4fd1"}})))):a.default.createElement("div",{className:"chatbot-container"},a.default.createElement("div",{className:"opening-line"},a.default.createElement("span",{style:{cursor:"pointer"},onClick:()=>d(!r),className:"chatbot-title"},"LeoneAmerica Demo"),a.default.createElement("span",{className:"close-icon",onClick:()=>d(!r),style:{cursor:"pointer"}},r?a.default.createElement("i",{className:"fa-sharp fa-solid fa-angle-down",style:{color:"#0d4fd1"}}):a.default.createElement("i",{className:"fa-sharp fa-solid fa-angle-up",style:{color:"#0d4fd1"}}))),a.default.createElement("div",{className:"messages"},n.map(((e,t)=>a.default.createElement("div",{key:t,ref:t===n.length-1?i:null,className:"message-item"},"user"===e.user&&a.default.createElement("span",{className:0===t?"hidden":"user"},e.message),"bot"===e.user&&a.default.createElement("span",{className:"bot"},o&&t===n.length-1?(console.log(`Showing loader for index ${t}`),a.default.createElement("div",{className:"loader"})):e.message))))),a.default.createElement("div",{className:"input-area"},a.default.createElement("input",{type:"text",value:t,onChange:e=>l(e.target.value),placeholder:"Ask me something...",onKeyDown:e=>"Enter"===e.key&&u(t)}),t.length>0?a.default.createElement("button",{onClick:()=>u(t)},"Send"):a.default.createElement("button",{disabled:!0},"Send"))))}}));
